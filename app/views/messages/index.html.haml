.chat
  .chat-side
    .chat-user.clearfix
      %h5
        = current_user.name
      .chat-user__actions
        .chat-user__action
          = link_to new_group_path do
            = fa_icon 'pencil-square-o', class: 'icon'
          = link_to edit_user_path(current_user) do
            = fa_icon 'cog', class: 'icon'

    %ul{class: "chat-groups"}
      - current_user.groups.each do |group|
        .chat-group
          .chat-group__link
            .chat-group__name
              = link_to group.name, group_messages_path(group)
              .chat-group__message
                = group.show_last_message

  .chat-main
    .chat-header.clearfix
      .chat-header--left
        %h2
          = @group.name
        %p{class: "chat-header__users"}
          Members:
          - @group.members.each do |member|
            %span{class: "chat-header__user"}
              = member.user.name
      .chat-header--right
        = link_to 'Edit', edit_group_path(@group), class: "chat-header__edit-btn"
    .chat-body
      %ul{class: "chat-messages"}
        - @messages.each do |message|
          %li{class: "chat-message"}
            .chat-message__header.clearfix
              %p{class: "chat-message__name"}
                = message.user.name
              %p{class: "chat-message__time"}
                = message.created_at
            %p{class: "chat-message__body"}
              = message.body
            -if message.image.present?
              %P{class: "chat-message__image"}
                = image_tag message.image.url

    .chat-footer
      .chat-footer__body
        = form_for [@group, @message] do |f|
          = f.text_field :body, class: 'form__message', placeholder: 'type a message'
          = f.label :image, class: 'form__mask__image' do
            = fa_icon 'picture-o', class: 'icon'
            = f.file_field :image, class: 'hidden'
          = f.submit 'Send', class: 'form__submit'
